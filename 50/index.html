<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>50 MESSAGING PAGE to SW</title>
    <meta name="description" content="A lynda.com example of HTML5 and CSS3">
    <meta name="keywords" content="html5, css3, lynda, local storage, canvas, forms, semantics, web apps">
    <link type="text/css" href="../_css/w3.css" rel="stylesheet">
    <link type="text/css" href="../_css/pwa-course.css" rel="stylesheet">
    <script src="app.js" defer></script>
</head>
<body>
    <main>
        <div class="w3-main" style="width:1000px;margin: 40px  auto">
            <div class="w3-card-4">
                <header class="w3-container w3-blue">
                    <h1>Page sends message to SW and gets reply</h1>
                </header>
                <div class="w3-container">
                    <br>
                    <p>We can send messages between PAGE and SW using the broswer's Messaging API.</p>
                    <p>Messages are sent with a JSON output. In this case we have {"action":"resources-updated"}.</p>
                    <p>Once we identify the message we can then carry out further code.</p>
                    <p>e.g we send a request for the SW to open up a new CACHE for "Saved Articles" and it will save the page name and contents.</p>
                    <p>
                        <button class="w3-button w3-round-xlarge w3-blue" onclick="update()">SEND MESSAGE TO SW</button>
                        <div id="SW"></div>
                    </p>
                    <p>Message from SW will in box...</p>
                    <div style="height:175px; width:500px; border: 3px solid orange;"><br>
                        <div id="sw" style="padding:30px; font-size: 30px;font-weight:bold;"></div>
                    </div >
                    
                    <br>
                </div>
                <footer class="w3-container w3-blue">
                    <h5>Footer</h5>
                </footer>
            </div>

        </div>
    </main>
    <script>
        const sw = document.getElementById('sw');
        sw.innerHTML = '';
        // add an event listener for messge froim SW
        navigator.serviceWorker.addEventListener("message", function (event) {
            sw.innerHTML = event.data.action;
        })
    </script>
    </div>
</body>
</html>